# 以下是开发的时候随便写的东西

## 收获与感想

配置 cmake比上次写 (已经鸽掉的) 小恐龙有了些许进步。嘛，可能是因为还没用第三方库的原因。

设计模式，`chatgpt` 告诉我工厂模式这种设计模式，让我不禁感慨自己知识的匮乏，看来，不只需要学习语言特性与轮子，还需要学习设计模式等等。

> warning C4819: 该文件包含不能在当前代码页(936)中表示的字符。请将该文件保存为 Unicode 格式以防止数据丢失

`add_compile_options("$<$[C_COMPILER_ID:MSVC](C_COMPILER_ID:MSVC):/source-charset:utf-8>")`

遇到了循环依赖的问题，解决方法是使用前向声明，但是这样就不能使用 `unique_ptr` 了，因为 `unique_ptr` 需要知道完整的类型信息。

还尝试使用了抽象接口类，这样使得程序更加灵活，但是也带来了一些问题，容易又回到循环依赖的问题。

于是，我就把 `unique_ptr` 换成了 `shared_ptr`。为了实现,多个对象之间共享所有权侧重于生命周期控制,还使用了 `weak_ptr`

------

### 过了很久

离一开始编辑 `README.md` 已经过去了很长时间，现在是 2023年 5 月 18 日，下午 17:18。刚刚做完非图形化界面的部分，没想到花了这么长时间。这次大作业让我学到了很多东西吗？

首先，使用 Cmake 进行构建，这是我第二次使用 Cmake 进行构建，上一次是那个已经鸽掉的小恐龙。似乎并没有学到什么，毕竟 Cmake 有ctest啊,安装啊,打包啊,这些我都没有用到。

花了一段时间来搞编译器，其实这个项目根本就没有什么对编译器的要求，但凡支持 C++ 14 就行，但人菜瘾大，从 g++ 到 用 mingw 链接器的 Clang++,到 MSVC，再到 with MSVC 链接器的 Clang++,怎么说呢，唯一察觉的不同是 `Clang` 会给更丰富的报错警告,`MSVC` 默认在中文环境下会用 GBK，所以还得单独在 CMakeLists 里面加上 UTF-8 的编译选项。

至于老朋友 MinGW ，在网上随便翻资料的时候找到了很好的博文，讲的是 win 平台的 `gcc` 编译器们，从 `MinGW` `TDM-GCC` `MinGW-w64` `WinLibs` 到 `CygWin`和`MSYS2`。讲得很好,又在网上看到一个手动编译 MinGW 的教程，是一个叫`谷雨同学`的人写的，翻了一下 ta 的博客，发现是北大的，在当助教的时候还写了个网站，自己还在写 `C++` 的教程，真是厉害。这个人还做了一个 `VS Code`的 C 编译器配置器，迭代了几个版本，从 C# 到 Rust 的 Tauri。

接下来的日子并不是很顺利，似乎花了很多时间来尝试新的东西，三种智能指针就折腾了一段时间，在用 for_each 循环删除 vector 里的内容的时候还遇上了坑🕳

5 月 7日参加的大英赛，成绩感人, 5 月 12 日的时候,发现这个作业就是完完全全 copy 的 PKU 的某个作业，顿时感觉非常的失望,与 Jeff 聊了聊。

五一的时候去了济南，顺便去了几个 SDU 的校区，千佛山、趵突泉和中心,还去见了 Hai'han 一面，感觉还是很开心的。

15th May ,发现还要赶 英语组队作业的ddl，还有导师会议要准备，第二天体育考试，两周后交离散作业,事情很多..

5 月 3 号，买了份 P5R，很好玩，但是也很耗时间，不过还是很开心的。

至于写这个程序之间种种麻烦糟心事，就不提了。

到底要不要加图形界面呢？

### GUI 界面大致写完了

容我平复平复心情再来完善这个 READEME，先去打包去

### 找出bug所在了

重复调用 paintevnet 是因为子部件 在 painteevent 里更改了`label`的几个属性，导致子部件重绘，结果递归一直调用

至于默认文本，是因为每行前面多了个空格，所以程序就一直卡在那里了，emmm 要不要加一个格式检测呢...

### 在尝试 GitHub Actions

我大概在五月末的时候帮 `dadawufufu` 重新写了一次，可能是因为看了一篇组合优于继承的什么文章，把city组合进了headquater里面，好多了

现在是 2023 年的 9 月 10 日，完成了用 Github Actions 自动构建并发布到 release 上。

是时候 archive 这个 repo 了。

我现在在听 Barricades。
